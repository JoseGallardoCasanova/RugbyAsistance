<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Autoinscripci贸n - Rugby Club</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- Cargar variables de entorno primero -->
    <script>
        // Variables de entorno inyectadas en build time
        window.ENV = {
            SUPABASE_URL: '{{SUPABASE_URL}}',
            SUPABASE_ANON_KEY: '{{SUPABASE_ANON_KEY}}'
        };
    </script>
    
    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1> Rugby Club</h1>
            <p>Formulario de Autoinscripci贸n de Jugador</p>
        </div>

        <form id="formulario-inscripcion">
            <!-- RUT -->
            <div class="form-group">
                <label for="rut">RUT *</label>
                <input type="text" id="rut" name="rut" required 
                       placeholder="Ej: 12345678-9"
                       pattern="[0-9]{7,8}-[0-9kK]"
                       title="Formato: 12345678-9">
            </div>

            <!-- Nombre -->
            <div class="form-group">
                <label for="nombre">Nombre Completo *</label>
                <input type="text" id="nombre" name="nombre" required 
                       placeholder="Nombre y apellidos completos">
            </div>

            <!-- Categor铆a -->
            <div class="form-group">
                <label for="categoria">Categor铆a *</label>
                <select id="categoria" name="categoria" required>
                    <option value="">Seleccionar categor铆a...</option>
                </select>
            </div>

            <!-- Fecha de Nacimiento -->
            <div class="form-group">
                <label for="fecha_nacimiento">Fecha de Nacimiento *</label>
                <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" required>
            </div>

            <!-- Direcci贸n -->
            <div class="form-group">
                <label for="direccion">Direcci贸n</label>
                <input type="text" id="direccion" name="direccion" 
                       placeholder="Direcci贸n completa">
            </div>

            <!-- Ciudad -->
            <div class="form-group">
                <label for="ciudad">Ciudad</label>
                <input type="text" id="ciudad" name="ciudad" 
                       placeholder="Ciudad de residencia">
            </div>

            <!-- Tel茅fono -->
            <div class="form-group">
                <label for="telefono">Tel茅fono</label>
                <input type="tel" id="telefono" name="telefono" 
                       placeholder="+56 9 1234 5678">
            </div>

            <!-- Email -->
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" 
                       placeholder="correo@ejemplo.com">
            </div>

            <!-- Contacto de Emergencia -->
            <div class="form-group">
                <label for="contacto_emergencia">Contacto de Emergencia *</label>
                <input type="text" id="contacto_emergencia" name="contacto_emergencia" required
                       placeholder="Nombre y relaci贸n">
            </div>

            <!-- Tel茅fono de Emergencia -->
            <div class="form-group">
                <label for="telefono_emergencia">Tel茅fono de Emergencia *</label>
                <input type="tel" id="telefono_emergencia" name="telefono_emergencia" required
                       placeholder="+56 9 1234 5678">
            </div>

            <!-- Previsi贸n -->
            <div class="form-group">
                <label for="prevision">Previsi贸n de Salud</label>
                <input type="text" id="prevision" name="prevision" 
                       placeholder="Fonasa, Isapre, etc.">
            </div>

            <!-- Grupo Sangu铆neo -->
            <div class="form-group">
                <label for="grupo_sanguineo">Grupo Sangu铆neo</label>
                <select id="grupo_sanguineo" name="grupo_sanguineo">
                    <option value="">Seleccionar...</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>
            </div>

            <!-- Alergias -->
            <div class="form-group">
                <label for="alergias">Alergias</label>
                <textarea id="alergias" name="alergias" rows="2"
                          placeholder="Alergias conocidas (medicamentos, alimentos, etc.)"></textarea>
            </div>

            <!-- Enfermedades Cr贸nicas -->
            <div class="form-group">
                <label for="enfermedades_cronicas">Enfermedades Cr贸nicas</label>
                <textarea id="enfermedades_cronicas" name="enfermedades_cronicas" rows="2"
                          placeholder="Enfermedades cr贸nicas o condiciones m茅dicas"></textarea>
            </div>

            <!-- Medicamentos -->
            <div class="form-group">
                <label for="medicamentos">Medicamentos</label>
                <textarea id="medicamentos" name="medicamentos" rows="2"
                          placeholder="Medicamentos que toma regularmente"></textarea>
            </div>

            <!-- Lesiones Previas -->
            <div class="form-group">
                <label for="lesiones_previas">Lesiones Previas</label>
                <textarea id="lesiones_previas" name="lesiones_previas" rows="2"
                          placeholder="Lesiones deportivas anteriores relevantes"></textarea>
            </div>

            <!-- 驴Fuma? -->
            <div class="form-group checkbox-group">
                <label>
                    <input type="checkbox" id="fuma" name="fuma">
                    驴Fuma?
                </label>
            </div>

            <!-- Frecuencia Fumador (solo si fuma) -->
            <div class="form-group" id="frecuencia-fumador-field" style="display: none;">
                <label for="frecuencia_fumador">Frecuencia</label>
                <select id="frecuencia_fumador" name="frecuencia_fumador">
                    <option value="">Seleccionar...</option>
                    <option value="ocasional">Ocasional</option>
                    <option value="social">Social (fiestas/eventos)</option>
                    <option value="diario">Diario</option>
                </select>
            </div>

            <!-- Observaciones -->
            <div class="form-group">
                <label for="observaciones">Observaciones</label>
                <textarea id="observaciones" name="observaciones" rows="3"
                          placeholder="Cualquier informaci贸n adicional relevante"></textarea>
            </div>

            <!-- Autorizaci贸n Uso de Imagen -->
            <div class="form-group checkbox-group">
                <label style="display: flex; align-items: flex-start; gap: 10px;">
                    <input type="checkbox" id="autorizo_uso_imagen" name="autorizo_uso_imagen" required>
                    <span>Autorizo el uso de mi imagen para fines deportivos y promocionales del club *</span>
                </label>
            </div>

            <!-- Mensajes -->
            <div id="success-message" class="message success hidden"></div>
            <div id="error-message" class="message error hidden"></div>

            <!-- Loading -->
            <div id="loading" class="hidden">
                <div class="spinner"></div>
                <p>Enviando...</p>
            </div>

            <!-- Bot贸n Submit -->
            <button type="submit" id="submit-btn">Registrarme</button>
        </form>

        <div class="footer">
            <p>* Campos obligatorios</p>
            <p>Toda la informaci贸n ser谩 tratada de forma confidencial</p>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
